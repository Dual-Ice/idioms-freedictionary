(async()=>document.querySelector(".content-holder section ul").addEventListener("click",h))();async function h(t){if(t.target.tagName!=="A")return;t.preventDefault(),t.stopPropagation();const o=t.target,{success:n,data:e}=await E({html:await C(o.attributes.href.value),name:o.text});if(!n)return;const i=document.querySelector("div#idioms-popup");i&&p(i),f(e)}async function E(t){return await chrome.runtime.sendMessage({sender:"COACH_IDIOMS",data:t})}async function C(t){return new Promise((o,n)=>{const e=new XMLHttpRequest;e.open("GET",t,!0),e.send(null),e.onreadystatechange=()=>{e.readyState===4&&o(e.responseText)},e.onerror=()=>{n(e.statusText)}})}function p(t){t.remove()}function f({title:t,idioms:o}){const n=document.createElement("div");n.id="idioms-popup";const e=document.createElement("div");e.className="idioms-popup__title";const i=document.createElement("h3");i.innerHTML=t,e.appendChild(i);const d=document.createElement("button");d.innerHTML="X",d.addEventListener("click",()=>p(n)),e.appendChild(d),n.appendChild(e),n.appendChild(document.createElement("hr"));const s=document.createElement("div");s.className="idioms-content",o.forEach(m=>{const c=document.createElement("div");c.className="idiom-content",s.appendChild(c);const a=document.createElement("div");a.className="idiom-content__descriptions",a.innerHTML=m.description,c.appendChild(a);const l=document.createElement("div");l.className="idiom-content__illustrations",c.appendChild(l),m.illustrations.forEach(u=>{const r=document.createElement("div");r.className="idiom-content__illustrations--item",r.innerHTML=u,l.appendChild(r)})}),n.appendChild(s),document.body.appendChild(n)}
