(async()=>document.querySelector(".content-holder").addEventListener("click",u))();async function u(e){if(e.target.tagName!=="A"||!e.currentTarget.querySelector("section ul").contains(e.target))return;e.preventDefault(),e.stopPropagation();const t=e.target,{success:o,data:n}=await i({html:await d(t.attributes.href.value),name:t.text});if(!o)return;const c=document.querySelector("div#idioms-popup");c&&r(c),p(n)}async function i(e){return await chrome.runtime.sendMessage({sender:"COACH_IDIOMS",data:e})}async function d(e){return new Promise((t,o)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.send(null),n.onreadystatechange=()=>{n.readyState===4&&t(n.responseText)},n.onerror=()=>{o(n.statusText)}})}function r(e){e.remove()}function l(e){const t=window.getSelection(),o=document.createRange();t.removeAllRanges(),o.selectNodeContents(e),t.addRange(o);try{const c=document.execCommand("copy")?"Content copied successfully.":"Content copy was unsuccessful.";console.log(c)}catch(n){console.error("Failed to copy content: ",n)}t.removeAllRanges()}function p(e){const t=document.createElement("div");t.id="idioms-popup";const o=document.createElement("button");o.innerHTML="X",o.className="idioms-popup__close",o.addEventListener("click",()=>r(t)),t.appendChild(o);const n=m();t.appendChild(n);const c=document.createElement("div");c.className="idioms-popup__content",e.forEach((a,f)=>{const s=document.createElement("div");s.innerHTML=a,c.appendChild(s)}),n.addEventListener("click",()=>l(c)),t.appendChild(c),document.body.appendChild(t)}function m(){const e=document.createElement("button");return e.innerHTML="Copy",e.className="idioms-popup__copy",e}
